<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AgroNexus - Weather Forecast</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --primary: #2e7d32;
      --primary-dark: #1b5e20;
      --primary-light: #4caf50;
      --secondary: #ffd600;
      --background: #f0f9e9;
      --card-bg: #ffffff;
      --text: #333333;
      --text-light: #666666;
      --border: #c8e6c9;
      --error: #b00020;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, var(--background) 0%, #c8e6c9 100%);
      color: var(--text);
      min-height: 100vh;
      padding-bottom: 20px;
    }
    
    /* Header Styles */
    header {
      background: linear-gradient(to right, var(--primary-dark), var(--primary));
      color: white;
      padding: 15px 5%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .logo {
      font-size: 28px;
      font-weight: bold;
      display: flex;
      align-items: center;
    }
    
    .logo i {
      margin-right: 10px;
      color: var(--secondary);
    }
    
    .back-btn {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.4);
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }
    
    .back-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }
    
    .auth-buttons {
      display: flex;
      gap: 10px;
    }
    
    .auth-buttons button {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.4);
      color: white;
      padding: 8px 20px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 1rem;
    }
    
    .auth-buttons button:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }
    
    /* Main Content Styles */
    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 0 20px;
    }
    
    .hero {
      text-align: center;
      padding: 40px 20px;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
      border: 1px solid var(--border);
    }
    
    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: linear-gradient(to right, var(--primary-light), var(--primary));
    }
    
    .hero h1 {
      font-size: 2.2rem;
      color: var(--primary-dark);
      margin-bottom: 15px;
    }
    
    .hero p {
      font-size: 1.1rem;
      color: var(--text-light);
      max-width: 700px;
      margin: 0 auto 30px;
    }
    
    /* Location Selection */
    .location-selector {
      background: #f8f9fa;
      border-radius: 15px;
      padding: 30px;
      max-width: 800px;
      margin: 0 auto;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--border);
    }
    
    .location-selector h2 {
      text-align: center;
      color: var(--primary-dark);
      margin-bottom: 25px;
      font-size: 1.6rem;
    }
    
    .select-group {
      margin-bottom: 20px;
      position: relative;
    }
    
    .select-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .select-group select {
      width: 100%;
      padding: 14px;
      border: 2px solid var(--border);
      border-radius: 10px;
      font-size: 1rem;
      background: var(--card-bg);
      transition: border-color 0.3s;
      color: var(--text);
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232e7d32' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 1rem center;
      background-size: 1em;
    }
    
    .select-group select:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }
    
    .get-weather-btn {
      display: block;
      width: 100%;
      padding: 18px;
      background: linear-gradient(to right, var(--primary-light), var(--primary-dark));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .get-weather-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }
    
    .get-weather-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(76, 175, 80, 0.5);
    }
    
    .get-weather-btn:hover::before {
      left: 100%;
    }
    
    .get-weather-btn:active {
      transform: translateY(-2px);
    }
    
    .get-weather-btn:disabled {
      background: #a5d6a7;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    #locationError {
      color: var(--error);
      margin-top: 8px;
      display: none;
      text-align: center;
      font-weight: 500;
      padding: 10px;
      background: #ffebee;
      border-radius: 8px;
      border: 1px solid var(--error);
    }
    
    /* Weather Forecast */
    .forecast-section {
      margin-top: 30px;
      display: none;
    }
    
    .location-info {
      text-align: center;
      margin-bottom: 30px;
      background: #e8f5e9;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      border: 1px solid var(--border);
    }
    
    .location-info h3 {
      font-size: 1.5rem;
      color: var(--primary-dark);
      margin-bottom: 10px;
    }
    
    .location-info p {
      font-size: 1.2rem;
      color: var(--primary);
      font-weight: 600;
    }
    
    .section-title {
      text-align: center;
      color: var(--primary-dark);
      font-size: 1.8rem;
      margin-bottom: 30px;
      position: relative;
    }
    
    .section-title::after {
      content: "";
      display: block;
      width: 80px;
      height: 4px;
      background: var(--primary-light);
      margin: 10px auto;
      border-radius: 2px;
    }
    
    .forecast-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .forecast-card {
      background: var(--card-bg);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
      border: 1px solid var(--border);
    }
    
    .forecast-card:hover {
      transform: translateY(-10px);
    }
    
    .card-header {
      background: linear-gradient(to right, var(--primary-light), var(--primary-dark));
      color: white;
      padding: 15px;
      text-align: center;
    }
    
    .card-header .date {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .card-header .day {
      font-size: 0.9rem;
      opacity: 0.9;
    }
    
    .card-body {
      padding: 20px;
      text-align: center;
    }
    
    .weather-icon {
      font-size: 3rem;
      margin: 10px 0;
      color: var(--primary);
    }
    
    .temperature {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 10px 0;
      color: var(--text);
    }
    
    .weather-condition {
      font-size: 1rem;
      color: var(--text-light);
      margin-bottom: 15px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .weather-details {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #e9ecef;
    }
    
    .detail {
      text-align: center;
      margin: 5px;
      flex: 1;
      min-width: 70px;
    }
    
    .detail i {
      font-size: 1rem;
      color: var(--primary);
      margin-bottom: 5px;
    }
    
    .detail .label {
      font-size: 0.8rem;
      color: var(--text-light);
    }
    
    .detail .value {
      font-weight: 600;
      color: var(--text);
      font-size: 0.9rem;
    }
    
    /* Advisory */
    .advisory-container {
      background: #e8f5e9;
      border-radius: 15px;
      padding: 25px;
      margin-top: 40px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border: 1px solid var(--border);
    }
    
    .advisory-container h3 {
      color: var(--primary-dark);
      margin-bottom: 15px;
      text-align: center;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .advisory-container p {
      line-height: 1.6;
      color: var(--text);
      text-align: center;
      margin-bottom: 20px;
    }
    
    .advisory-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .advisory-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
      border-left: 4px solid var(--primary);
    }
    
    .advisory-card h4 {
      color: var(--primary-dark);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .advisory-card p {
      text-align: left;
      font-size: 0.95rem;
      color: var(--text-light);
    }
    
    /* Footer */
    footer {
      text-align: center;
      padding: 30px 20px 20px;
      color: var(--primary);
      margin-top: 50px;
    }
    
    footer p {
      margin-top: 10px;
      font-size: 0.9rem;
    }
    
    .social-icons {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }
    
    .social-icons a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: var(--primary-light);
      color: white;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .social-icons a:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
    }
    
    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .top-bar {
        flex-direction: column;
        gap: 15px;
      }
      
      .logo {
        margin-bottom: 0;
      }
      
      .hero h1 {
        font-size: 1.8rem;
      }
      
      .hero p {
        font-size: 1rem;
      }
      
      .location-selector {
        padding: 20px;
      }
      
      .section-title {
        font-size: 1.6rem;
      }
      
      .location-info h3 {
        font-size: 1.3rem;
      }
      
      .location-info p {
        font-size: 1.1rem;
      }
      
      .forecast-cards {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }
    
    @media (max-width: 480px) {
      .auth-buttons {
        width: 100%;
        justify-content: center;
        margin-top: 10px;
      }
      
      .hero {
        padding: 30px 15px;
      }
      
      .location-selector {
        padding: 15px;
      }
      
      .forecast-cards {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="top-bar">
      <a href="home.html" class="back-btn">
        <i class="fas fa-arrow-left"></i> Back to Home
      </a>
      <div class="logo">
        <i class="fas fa-seedling"></i> AgroNexus
      </div>
      <!-- <div class="auth-buttons">
        <button>Login</button>
        <button>Sign Up</button>
      </div> -->
    </div>
  </header>
  
  <div class="container">
    <section class="hero">
      <h1>Agriculture Weather Forecast</h1>
      <p>Get accurate 7-day weather predictions tailored for your farming activities</p>
      
      <div class="location-selector">
        <h2>Select Your Location</h2>
        
        <div class="select-group">
          <label for="state"><i class="fas fa-map-marker-alt"></i> Select State</label>
          <select id="state">
            <option value="">-- Choose your state --</option>
            <option value="maharashtra">Maharashtra</option>
            <option value="punjab">Punjab</option>
            <option value="gujarat">Gujarat</option>
            <option value="tamilnadu">Tamil Nadu</option>
            <option value="karnataka">Karnataka</option>
            <option value="uttarpradesh">Uttar Pradesh</option>
          </select>
        </div>
        
        <div class="select-group">
          <label for="district"><i class="fas fa-map"></i> Select District</label>
          <select id="district" disabled>
            <option value="">-- Select district --</option>
          </select>
        </div>
        
        <div class="select-group">
          <label for="village"><i class="fas fa-village"></i> Select Village</label>
          <select id="village" disabled>
            <option value="">-- Select village --</option>
          </select>
        </div>
        
        <button id="getWeatherBtn" class="get-weather-btn" disabled>
          <i class="fas fa-cloud-sun"></i> Get Weather Forecast
        </button>
        <div id="locationError"></div>
      </div>
    </section>
    
    <section class="forecast-section" id="forecastSection">
      <div class="location-info">
        <h3>7-Day Weather Forecast for</h3>
        <p id="selectedLocation">—</p>
      </div>
      
      <h2 class="section-title">Daily Forecast</h2>
      <div class="forecast-cards" id="forecastCards"></div>
      
      <div class="advisory-container">
        <h3><i class="fas fa-seedling"></i> Agricultural Advisory</h3>
        <p id="advisorySummary">Based on the upcoming weather conditions, here are recommendations for your farming activities</p>
        <div class="advisory-grid" id="advisoryGrid"></div>
      </div>
    </section>
  </div>
  
  <footer>
    <div class="logo">
      <i class="fas fa-seedling"></i> AgroNexus
    </div>
    <p>© 2025 AgroNexus. Empowering farmers with accurate weather forecasts and agricultural advice.</p>
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // DOM elements
      const stateSelect = document.getElementById("state");
      const districtSelect = document.getElementById("district");
      const villageSelect = document.getElementById("village");
      const getWeatherBtn = document.getElementById("getWeatherBtn");
      const forecastSection = document.getElementById("forecastSection");
      const selectedLocationP = document.getElementById("selectedLocation");
      const forecastCards = document.getElementById("forecastCards");
      const advisoryGrid = document.getElementById("advisoryGrid");
      const locationError = document.getElementById("locationError");
      const advisorySummary = document.getElementById("advisorySummary");
      
      // Static location data
      const locationData = {
        maharashtra: {
          pune: ["Hinjewadi", "Baner", "Hadapsar", "Kothrud", "Shivajinagar"],
          mumbai: ["Andheri", "Bandra", "Dadar", "Colaba", "Kurla"],
          nashik: ["Deolali", "Sinnar", "Trimbak", "Malegaon", "Ghoti"],
          nagpur: ["Hingna", "Katol", "Ramtek", "Umred", "Brahmapuri"],
        },
        punjab: {
          ludhiana: ["Jagraon", "Raikot", "Samrala", "Dhurkot", "Mullanpur"],
          amritsar: ["Ajnala", "Majitha", "Verka", "Raja Sansi", "Gurree Majra"],
          patiala: ["Rajpura", "Samana", "Patran", "Banur", "Bhagta Bhai Ka"],
          bathinda: ["Mansa", "Talwandi Sabo", "Barnala", "Maur", "Khanpur"],
        },
        gujarat: {
          ahmedabad: ["Maninagar", "Navrangpura", "Gota", "Bodakdev", "Shahibaug"],
          surat: ["Adajan", "Udhna", "Varachha", "Piplod", "Katargam"],
          vadodara: ["Akota", "Gotri", "Padra", "Harni", "Vasna"],
          rajkot: ["Jetpur", "Jamnagar", "Morbi", "Gondal", "Saurashtra University Area"],
        },
        tamilnadu: {
          chennai: ["T. Nagar", "Anna Nagar", "Velachery", "Adyar", "Porur"],
          coimbatore: ["R.S. Puram", "Gandhipuram", "Saibaba Colony", "Sivananda Colony", "Singanallur"],
          madurai: ["Thirunagar", "K.K. Nagar", "Simmakkal", "Alagar Kovil", "Vilangudi"],
        },
        karnataka: {
          bengaluru: ["Indiranagar", "Whitefield", "Koramangala", "Yelahanka", "Jayanagar"],
          mysuru: ["VV Mohalla", "JP Nagar", "Nazarbad", "Gokulam", "Kukkarahalli"],
          hubli: ["Vidyanagar", "Navanagar", "Gokul", "Gudigeri", "Kudchi"],
        },
        uttarpradesh: {
          lucknow: ["Gomti Nagar", "Aliganj", "Indira Nagar", "Chowk", "Hazratganj"],
          varanasi: ["Sigra", "Lalpur", "Ganj", "Shivala", "Shivpur"],
          agra: ["Shahganj", "Khandari", "Fatehabad", "Sadar", "Kheria"],
        },
      };
      
      // Weather condition icons mapping
      const weatherIcons = {
        sunny: "fas fa-sun",
        partly_cloudy: "fas fa-cloud-sun",
        cloudy: "fas fa-cloud",
        rainy: "fas fa-cloud-showers-heavy",
        storm: "fas fa-bolt",
        windy: "fas fa-wind",
        fog: "fas fa-smog"
      };
      
      // Event listeners
      stateSelect.addEventListener("change", handleStateChange);
      districtSelect.addEventListener("change", handleDistrictChange);
      villageSelect.addEventListener("change", handleVillageChange);
      getWeatherBtn.addEventListener("click", getWeatherForecast);
      
      // Initialize the app
      initApp();
      
      function initApp() {
        // Enable district select when state is selected
        stateSelect.addEventListener("change", function() {
          const state = stateSelect.value;
          if (state) {
            districtSelect.disabled = false;
            populateDistrictOptions(state);
          } else {
            districtSelect.disabled = true;
            villageSelect.disabled = true;
            getWeatherBtn.disabled = true;
          }
        });
        
        // Enable village select when district is selected
        districtSelect.addEventListener("change", function() {
          const district = districtSelect.value;
          if (district) {
            villageSelect.disabled = false;
            const state = stateSelect.value;
            populateVillageOptions(state, district);
          } else {
            villageSelect.disabled = true;
            getWeatherBtn.disabled = true;
          }
        });
        
        // Enable get weather button when village is selected
        villageSelect.addEventListener("change", function() {
          getWeatherBtn.disabled = !villageSelect.value;
        });
      }
      
      function handleStateChange() {
        locationError.style.display = "none";
        const state = stateSelect.value;
        
        if (state) {
          districtSelect.disabled = false;
          populateDistrictOptions(state);
        } else {
          districtSelect.disabled = true;
          villageSelect.disabled = true;
          getWeatherBtn.disabled = true;
        }
        
        // Reset district and village selects
        districtSelect.innerHTML = '<option value="">-- Select district --</option>';
        villageSelect.innerHTML = '<option value="">-- Select village --</option>';
        villageSelect.disabled = true;
        getWeatherBtn.disabled = true;
      }
      
      function handleDistrictChange() {
        locationError.style.display = "none";
        const state = stateSelect.value;
        const district = districtSelect.value;
        
        if (district) {
          villageSelect.disabled = false;
          populateVillageOptions(state, district);
        } else {
          villageSelect.disabled = true;
          getWeatherBtn.disabled = true;
        }
      }
      
      function handleVillageChange() {
        locationError.style.display = "none";
        getWeatherBtn.disabled = !villageSelect.value;
      }
      
      function populateDistrictOptions(state) {
        // Clear existing options
        districtSelect.innerHTML = '<option value="">-- Select district --</option>';
        
        // Get districts for selected state
        const districts = Object.keys(locationData[state] || []);
        
        // Add district options
        districts.forEach(district => {
          const option = document.createElement("option");
          option.value = district;
          option.textContent = district.charAt(0).toUpperCase() + district.slice(1);
          districtSelect.appendChild(option);
        });
      }
      
      function populateVillageOptions(state, district) {
        // Clear existing options
        villageSelect.innerHTML = '<option value="">-- Select village --</option>';
        
        // Get villages for selected district
        const villages = locationData[state][district] || [];
        
        // Add village options
        villages.forEach(village => {
          const option = document.createElement("option");
          option.value = village;
          option.textContent = village;
          villageSelect.appendChild(option);
        });
      }
      
      function getWeatherForecast() {
        const state = stateSelect.value;
        const district = districtSelect.value;
        const village = villageSelect.value;
        
        if (!state || !district || !village) {
          showError("Please select state, district and village");
          return;
        }
        
        // Show loading state on button
        const originalText = getWeatherBtn.innerHTML;
        getWeatherBtn.innerHTML = '<span class="spinner"></span> Loading Forecast...';
        getWeatherBtn.disabled = true;
        
        // Simulate API delay
        setTimeout(() => {
          try {
            const weatherData = generateWeatherData(state, district, village);
            renderForecast(weatherData);
            getWeatherBtn.innerHTML = originalText;
            getWeatherBtn.disabled = false;
          } catch (error) {
            showError("Failed to load weather data. Please try again.");
            getWeatherBtn.innerHTML = originalText;
            getWeatherBtn.disabled = false;
          }
        }, 1500);
      }
      
      function generateWeatherData(state, district, village) {
        const locationName = ${village}, ${district}, ${state};
        const today = new Date();
        
        // Generate 7-day forecast
        const dailyForecast = [];
        const conditions = ["sunny", "partly_cloudy", "cloudy", "rainy"];
        
        for (let i = 0; i < 7; i++) {
          const date = new Date(today);
          date.setDate(today.getDate() + i);
          
          // Format date
          const formattedDate = date.toLocaleDateString("en-US", {
            weekday: "long",
            month: "short",
            day: "numeric"
          });
          
          // Random weather data
          const condition = conditions[Math.floor(Math.random() * conditions.length)];
          const minTemp = Math.floor(Math.random() * 10) + 18; // 18-27°C
          const maxTemp = minTemp + Math.floor(Math.random() * 5) + 5; // minTemp + 5-9°C
          
          dailyForecast.push({
            date: formattedDate,
            condition: condition,
            icon: weatherIcons[condition],
            minTemp: minTemp,
            maxTemp: maxTemp,
            precipitation: Math.floor(Math.random() * 100), // 0-99%
            humidity: Math.floor(Math.random() * 50) + 50, // 50-99%
            wind: (Math.random() * 15).toFixed(1) // 0.0-14.9 km/h
          });
        }
        
        // Generate agricultural advisory
        const advisory = generateAdvisory(dailyForecast);
        
        return {
          location: locationName,
          forecast: dailyForecast,
          advisory: advisory
        };
      }
      
      function generateAdvisory(forecast) {
        const advisories = [];
        
        // Check for rainy days
        const rainyDays = forecast.filter(day => day.condition === "rainy").length;
        if (rainyDays > 2) {
          advisories.push({
            title: "Irrigation",
            icon: "fas fa-tint",
            content: "Reduce irrigation as significant rainfall is expected. Monitor soil moisture levels to avoid overwatering."
          });
          
          advisories.push({
            title: "Pest Control",
            icon: "fas fa-bug",
            content: "High humidity may increase pest activity. Apply preventative measures for common fungal diseases."
          });
        } else if (rainyDays === 0) {
          advisories.push({
            title: "Irrigation",
            icon: "fas fa-tint",
            content: "Increase irrigation frequency as no rainfall is expected. Monitor soil moisture carefully."
          });
        }
        
        // Check for sunny days
        const sunnyDays = forecast.filter(day => day.condition === "sunny").length;
        if (sunnyDays > 3) {
          advisories.push({
            title: "Harvesting",
            icon: "fas fa-tractor",
            content: "Ideal conditions for harvesting. Schedule your harvest during the sunny days ahead."
          });
        }
        
        // Temperature advisory
        const maxTemp = Math.max(...forecast.map(day => day.maxTemp));
        if (maxTemp > 30) {
          advisories.push({
            title: "Heat Protection",
            icon: "fas fa-temperature-high",
            content: "High temperatures expected. Provide shade for sensitive crops and ensure adequate water supply."
          });
        }
        
        // Wind advisory
        const windyDay = forecast.find(day => parseFloat(day.wind) > 10);
        if (windyDay) {
          advisories.push({
            title: "Wind Protection",
            icon: "fas fa-wind",
            content: "Windy conditions forecasted. Secure any temporary structures and consider windbreaks for delicate plants."
          });
        }
        
        // General advisory if no specific conditions
        if (advisories.length === 0) {
          advisories.push({
            title: "Optimal Conditions",
            icon: "fas fa-seedling",
            content: "Weather conditions are favorable for most farming activities. Proceed with regular schedule."
          });
        }
        
        return advisories;
      }
      
      function renderForecast(weatherData) {
        // Show forecast section
        forecastSection.style.display = "block";
        
        // Update location
        selectedLocationP.textContent = weatherData.location;
        
        // Clear previous forecast
        forecastCards.innerHTML = "";
        
        // Render forecast cards
        weatherData.forecast.forEach(day => {
          const card = document.createElement("div");
          card.className = "forecast-card";
          card.innerHTML = `
            <div class="card-header">
              <div class="date">${day.date.split(",")[1]}</div>
              <div class="day">${day.date.split(",")[0]}</div>
            </div>
            <div class="card-body">
              <div class="weather-icon"><i class="${day.icon}"></i></div>
              <div class="temperature">${day.maxTemp}°C</div>
              <div class="weather-condition">${day.condition.replace("_", " ").toUpperCase()}</div>
              <div class="weather-details">
                <div class="detail">
                  <i class="fas fa-temperature-low"></i>
                  <div class="label">Min Temp</div>
                  <div class="value">${day.minTemp}°C</div>
                </div>
                <div class="detail">
                  <i class="fas fa-tint"></i>
                  <div class="label">Humidity</div>
                  <div class="value">${day.humidity}%</div>
                </div>
                <div class="detail">
                  <i class="fas fa-wind"></i>
                  <div class="label">Wind</div>
                  <div class="value">${day.wind} km/h</div>
                </div>
              </div>
            </div>
          `;
          forecastCards.appendChild(card);
        });
        
        // Render advisory
        renderAdvisory(weatherData.advisory);
        
        // Scroll to forecast section
        forecastSection.scrollIntoView({ behavior: "smooth" });
      }
      
      function renderAdvisory(advisories) {
        // Clear previous advisory
        advisoryGrid.innerHTML = "";
        
        // Update advisory summary
        if (advisories.length > 0) {
          advisorySummary.textContent = "Based on the upcoming weather conditions, here are recommendations for your farming activities";
        } else {
          advisorySummary.textContent = "No specific recommendations at this time. Weather conditions are optimal for farming activities.";
        }
        
        // Add advisory cards
        advisories.forEach(advice => {
          const card = document.createElement("div");
          card.className = "advisory-card";
          card.innerHTML = `
            <h4><i class="${advice.icon}"></i> ${advice.title}</h4>
            <p>${advice.content}</p>
          `;
          advisoryGrid.appendChild(card);
        });
      }
      
      function showError(message) {
        locationError.textContent = message;
        locationError.style.display = "block";
        
        // Hide error after 5 seconds
        setTimeout(() => {
          locationError.style.display = "none";
        }, 5000);
      }
    });
  </script>
</body>
</html>